@startuml research_agency_activity
skinparam defaultFontName "Segoe UI"
skinparam defaultFontSize 10
skinparam backgroundColor #FFFFFF

title Обработка запроса клиента на исследователя

|Клиент|
start
:Формулирует запрос на исследователя;
:Отправляет запрос в агенство;

|Менеджер по работе с клиентами|
:Получает запрос от клиента;
:Анализирует требования клиента;

if (Требования четкие?) then (yes)
  :Определяет критерии подбора;
else (no)
  :Уточняет требования у клиента;
  :Получает дополненную информацию;
endif

|Система подбора|
:Фильтрует базу исследователей по критериям;

if (Найдены подходящие кандидаты?) then (yes)
  :Формирует список кандидатов;
  
  |Менеджер по работе с клиентами|
  :Просматривает профили кандидатов;
  :Отбирает 3-5 лучших кандидатов;
  
  fork
    :Подготавливает резюме кандидатов;
  fork again
    :Рассчитывает стоимость услуг;
  end fork
  
  :Формирует коммерческое предложение;
  :Отправляет предложение клиенту;
  
  |Клиент|
  :Получает коммерческое предложение;
  :Оценивает кандидатов;
  
  if (Кандидат выбран?) then (yes)
    :Подтверждает выбор исследователя;
    
    |Менеджер проектов|
    :Создает проект в системе;
    :Назначает исследователя на проект;
    :Устанавливает контрольные точки;
    
    |Исследователь|
    :Получает уведомление о проекте;
    :Подтверждает участие;
    :Начинает работу над проектом;
    
    |Система|
    :Начинает учет рабочего времени;
    :Обновляет статус исследователя на "Занят";
    
    |Клиент|
    :Получает подтверждение начала работы;
    end
  else (no)
    if (Нужны другие кандидаты?) then (yes)
      :Запрашивает дополнительных кандидатов;
      stop
    else (no)
      :Отклоняет предложение;
      stop
    endif
  endif
else (no)
  |Менеджер по работе с клиентами|
  :Уведомляет клиента об отсутствии кандидатов;
  
  if (Клиент согласен расширить критерии?) then (yes)
    :Обновляет критерии поиска;
    stop
  else (no)
    :Закрывает запрос;
    stop
  endif
endif

@enduml